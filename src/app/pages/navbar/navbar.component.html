<!-- navbar.component.html -->
<mat-toolbar color="primary">
  <span class="logo">
    <a routerLink="/">
      <mat-icon>school</mat-icon> Il Tuo Logo
    </a>
  </span>

  <button mat-icon-button class="hamburger-button" (click)="toggleNavList()">
    <mat-icon>menu</mat-icon>
  </button>

  <span class="nav-list" [class.open]="isNavListOpen">
    <a mat-button routerLink="/" routerLinkActive="active" (click)="closeNavList()">
      <mat-icon>home</mat-icon> Home
    </a>

    <a mat-button routerLink="/chi-siamo" routerLinkActive="active" (click)="closeNavList()">
      <mat-icon>info</mat-icon> Chi Siamo
    </a>

    <a mat-button routerLink="/preferiti" routerLinkActive="active" *ngIf="isLoggedIn$ | async" (click)="closeNavList()">
      <mat-icon>favorite</mat-icon> Preferiti
      <span class="notification-badge" *ngIf="preferitiCount > 0">{{ preferitiCount }}</span>
  </a>

  <a mat-button routerLink="/carrello" routerLinkActive="active" *ngIf="isLoggedIn$ | async" (click)="closeNavList()">
      <mat-icon>shopping_cart</mat-icon> Carrello
      <span class="notification-badge" *ngIf="carrelloCount > 0">{{ carrelloCount }}</span>
  </a>
  <ng-container *ngIf="isLoggedIn$ | async; let user">
    <button mat-button [matMenuTriggerFor]="userMenu">
      <mat-icon>account_circle</mat-icon> {{ userName || 'Nome Utente' }}
    </button>
    <mat-menu #userMenu="matMenu">
      <button mat-menu-item routerLink="/profilo-utente" (click)="closeNavList()">
        <mat-icon>person</mat-icon> Profilo
      </button>
      <button mat-menu-item (click)="onLogout()">
        <mat-icon>exit_to_app</mat-icon> Logout
      </button>
    </mat-menu>
  </ng-container>



    <a mat-button *ngIf="!(isLoggedIn$ | async)" routerLink="/auth" routerLinkActive="active" (click)="closeNavList()">
      <mat-icon>lock_open</mat-icon> Login
    </a>
  </span>
</mat-toolbar>
